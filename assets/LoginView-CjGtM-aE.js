import{r as f,e as _,c as b,b as d,a as s,f as g,d as y,u as w,g as l,v as m,F as h,i as v,h as k,o as P,S as r}from"./index-BrREbNrm.js";import{_ as A}from"./VueLoading-l-VKllCj.js";import{r as V}from"./UserCircleIcon-BhcjD08z.js";const E={VITE_APP_API:"https://vue3-course-api.hexschool.io/"},L={class:"container mx-auto px-6 mt-24 mb-10 py-10"},I={class:"w-full max-w-md bg-gray-100 dark:bg-gray-800 dark:border dark:border-gray-600 p-6 md:p-8 rounded shadow-md"},T={class:"flex items-center text-xl md:text-2xl mb-4 justify-center text-primary dark:text-secondary whitespace-nowrap font-bold"},$={class:"mb-4"},N={class:"mb-4"},S={class:"text-center mt-6"},j=["disabled"],M={__name:"LoginView",setup(B){const{VITE_APP_API:c}=E,i=v("$axios"),u=k(),a=f({username:"",password:""}),o=_(!1);function p(){o.value=!0;const n=`${c}admin/signin`;i.post(n,a).then(e=>{if(e.data.success){const{token:t,expired:x}=e.data;document.cookie=`hexToken=${t}; expires=${new Date(x)}; path=/`,i.defaults.headers.common.Authorization=t,r("success","Login Successful"),u.push("/admin/products")}else r("error","Login Failed")}).catch(e=>{const t=e.response?.data?.message||"An error occurred. Please try again later.";r("error",t)}).finally(()=>{o.value=!1})}return(n,e)=>(P(),b(h,null,[d(A,{active:o.value},null,8,["active"]),s("div",L,[s("form",{class:"flex justify-center py-10",onSubmit:g(p,["prevent"])},[s("div",I,[s("h2",T,[d(w(V),{class:"w-6 h-6 md:w-8 md:h-8 text-primary dark:text-secondary mr-2"}),e[2]||(e[2]=y("Admin Login ",-1))]),s("div",$,[e[3]||(e[3]=s("label",{for:"inputEmail",class:"block text-sm font-medium text-gray-700 dark:text-gray-100 mb-1"},"Email",-1)),l(s("input",{type:"email",id:"inputEmail",class:"form-control text-sm",placeholder:"Email address",required:"",autofocus:"","onUpdate:modelValue":e[0]||(e[0]=t=>a.username=t)},null,512),[[m,a.username]])]),s("div",N,[e[4]||(e[4]=s("label",{for:"inputPassword",class:"block text-sm font-medium text-gray-700 dark:text-gray-100 mb-1"},"Password",-1)),l(s("input",{type:"password",id:"inputPassword",class:"form-control text-sm",placeholder:"Password",required:"","onUpdate:modelValue":e[1]||(e[1]=t=>a.password=t)},null,512),[[m,a.password]])]),s("div",S,[s("button",{class:"btn-primary w-full px-4 py-2 font-semibold rounded text-sm md:text-base",type:"submit",disabled:o.value}," Login as Admin ",8,j)])])],32)])],64))}};export{M as default};
