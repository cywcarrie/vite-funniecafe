import{c as a,a as e,o as r,e as u,m as C,x as T,h as I,b as o,u as i,n as h,j as p,f as E,F as k,p as V,t as d,d as w,w as N,R as j,i as B,S as f,I as L}from"./index-BrREbNrm.js";import{_ as O}from"./VueLoading-l-VKllCj.js";import{_ as R}from"./FooterComponent-CrwWYiNG.js";import{r as g}from"./ChevronRightIcon-Cpr8qF6r.js";import"./UserCircleIcon-BhcjD08z.js";function D(P,m){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}const M={VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funniecafeweb-api"},F={class:"mb-5"},H={class:"container mx-auto px-6 py-6"},Z={class:"flex justify-center items-center my-5 mt-3 space-x-2 md:space-x-4"},q={class:"my-12"},z={class:"flex justify-center items-center"},Q={class:"w-full md:w-10/12"},U={key:0,class:"mb-12"},Y={class:"flex justify-center items-center"},G={class:"flex flex-col items-center"},J={class:"bg-[#f5efe7] dark:bg-[#f5efe7]/10 dark:text-gray-100 rounded shadow-sm p-4 mb-6 space-y-4 border border-gray-200 dark:border-gray-500"},K={class:"font-semibold text-espresso dark:text-gray-100"},W={class:"whitespace-nowrap"},X={class:"whitespace-nowrap"},ee={class:"grid grid-cols-3 pt-4 font-bold text-center whitespace-nowrap"},te={class:"text-espresso text-xl dark:text-gray-100"},se={class:"bg-gray-100 dark:bg-gray-700 rounded shadow p-6 mb-12 space-y-6 text-sm md:text-base border border-gray-300 dark:border-gray-500"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-y-4 gap-x-8"},re={class:"whitespace-nowrap"},oe={class:"text-gray-900 dark:text-gray-300"},de={class:"text-gray-900 wrap-break-word dark:text-gray-300"},le={class:"whitespace-nowrap"},ne={class:"text-gray-900 dark:text-gray-300"},ie={class:"text-gray-900 wrap-break-word dark:text-gray-300"},ce={class:"pt-4 border-t dark:border-gray-300 mt-4"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-y-4 gap-x-8 items-center"},me={key:0,class:"inline-block px-3 py-1 rounded-full bg-red-300 text-red-900 font-semibold text-xs"},ue={key:1,class:"inline-block px-3 py-1 rounded-full bg-green-300 text-green-900 dark:text-green-700 dark:bg-green-100 font-semibold text-xs"},pe={key:0,class:"text-end"},fe={class:"btn-primary px-4 py-2 rounded inline-flex items-center text-sm md:text-base",type:"submit"},ge={key:1,class:"text-end"},ke={__name:"UserCheckOrder",setup(P){const{VITE_APP_API:m,VITE_APP_PATH:y}=M,v=B("$axios"),$=T(),b=I(),s=u({user:{}}),x=u(""),c=u(!1);function _(){const n=`${m}api/${y}/order/${x.value}`;c.value=!0,v.get(n).then(t=>{t.data.success&&(s.value=t.data.order)}).catch(t=>{if(t.response?.status===404)b.push("/not-found");else{const S=t.response?.data?.message||"An error occurred. Please try again later.";f("error",S)}}).finally(()=>{c.value=!1})}function A(){const n=`${m}api/${y}/pay/${x.value}`;c.value=!0,v.post(n).then(t=>{t.data.success&&(f("success","Payment Successful"),_())}).catch(t=>{const l=t.response?.data?.message||"An error occurred. Please try again later.";f("error",l)}).finally(()=>{c.value=!1})}return C(()=>{if(x.value=$.params.orderId,!x.value){b.push("/not-found");return}_()}),(n,t)=>(r(),a(k,null,[o(O,{active:c.value},null,8,["active"]),e("section",F,[e("div",H,[t[16]||(t[16]=e("div",{class:"banner banner2 h-[35vh] min-h-40 max-h-150 md:h-[50vh] md:min-h-50 flex justify-center items-center my-10 relative"},[e("h2",{class:"banner-title text-white font-extrabold text-3xl text-center absolute"}," Checkout Process ")],-1)),e("div",Z,[t[2]||(t[2]=e("div",{class:"flex flex-col items-center pay-header"},[e("span",{class:"mb-1"},"STEP 1"),e("span",null,"Information")],-1)),o(i(g),{class:"w-5 h-5 text-secondary dark:text-primary"}),e("div",{class:h(["flex flex-col items-center pay-header",{active:s.value.is_paid===!1}])},[...t[0]||(t[0]=[e("span",{class:"mb-1"},"STEP 2",-1),e("span",null,"Payment",-1)])],2),o(i(g),{class:"w-5 h-5 text-secondary dark:text-primary"}),e("div",{class:h(["flex flex-col items-center pay-header",{active:s.value.is_paid===!0}])},[...t[1]||(t[1]=[e("span",{class:"mb-1"},"STEP 3",-1),e("span",null,"Complete",-1)])],2)]),e("div",q,[e("div",z,[e("div",Q,[s.value.is_paid===!0?(r(),a("div",U,[e("div",Y,[o(i(D),{class:"w-6 h-6 text-green-600 dark:text-green-300 me-2"}),t[3]||(t[3]=e("p",{class:"font-bold text-green-600 dark:text-green-300 text-lg sm:text-xl md:text-2xl"}," Success ! ",-1))]),t[4]||(t[4]=e("p",{class:"font-semibold mt-4 text-center text-sm sm:text-base md:text-lg dark:text-white"}," A confirmation has been sent to your email ! ",-1))])):p("",!0),e("div",G,[t[15]||(t[15]=e("h3",{class:"text-center font-bold mb-6 md:mb-8 lg:mb-10 text-xl md:text-2xl dark:text-white"}," Order Details ",-1)),e("form",{class:"w-full max-w-full lg:max-w-2xl",onSubmit:E(A,["prevent"])},[e("div",J,[t[6]||(t[6]=e("div",{class:"grid grid-cols-3 font-semibold text-center border-b dark:border-gray-300 pb-3 text-gray-600 dark:text-gray-300 text-sm whitespace-nowrap"},[e("div",null,"Product"),e("div",null,"Qty"),e("div",null,"Price")],-1)),(r(!0),a(k,null,V(s.value.products,l=>(r(),a("div",{key:l.id,class:"grid grid-cols-3 text-center text-sm md:text-base py-3"},[e("div",K,d(l.product.title),1),e("div",W,d(l.qty),1),e("div",X,d(n.$format.currency(l.final_total)),1)]))),128)),e("div",ee,[t[5]||(t[5]=e("div",{class:"col-span-2 text-right dark:text-gray-100"},"Total",-1)),e("div",te,d(n.$format.currency(s.value.total)),1)])]),t[14]||(t[14]=e("h3",{class:"text-center font-bold mb-6 md:mb-8 lg:mb-10 text-xl md:text-2xl mt-12 dark:text-white"}," Customer Details ",-1)),e("div",se,[e("div",ae,[e("div",re,[t[7]||(t[7]=e("p",{class:"text-gray-700 text-sm font-semibold dark:text-gray-100"},"Name",-1)),e("p",oe,d(s.value.user.name),1)]),e("div",null,[t[8]||(t[8]=e("p",{class:"text-gray-700 text-sm font-semibold dark:text-gray-100"},"Email",-1)),e("p",de,d(s.value.user.email),1)]),e("div",le,[t[9]||(t[9]=e("p",{class:"text-gray-700 text-sm font-semibold dark:text-gray-100"},"Phone",-1)),e("p",ne,d(s.value.user.tel),1)]),e("div",null,[t[10]||(t[10]=e("p",{class:"text-gray-700 text-sm font-semibold dark:text-gray-100"},"Address",-1)),e("p",ie,d(s.value.user.address),1)])]),e("div",ce,[e("div",xe,[t[11]||(t[11]=e("p",{class:"text-gray-700 text-sm font-semibold dark:text-gray-100"}," Payment Status ",-1)),e("p",null,[s.value.is_paid?(r(),a("span",ue," Payment Completed ")):(r(),a("span",me," Not Yet Paid "))])])])]),s.value.is_paid===!1?(r(),a("div",pe,[e("button",fe,[t[12]||(t[12]=w(" Confirm Payment",-1)),o(i(g),{class:"w-5 h-5 text-white"})])])):p("",!0),s.value.is_paid===!0?(r(),a("div",ge,[o(i(j),{to:"/products",class:"btn-primary px-4 py-2 rounded inline-flex items-center text-sm md:text-base"},{default:N(()=>[o(i(L),{class:"w-5 h-5 pr-1 text-white"}),t[13]||(t[13]=w("Continue Shopping",-1))]),_:1})])):p("",!0)],32)])])])])])]),o(R)],64))}};export{ke as default};
