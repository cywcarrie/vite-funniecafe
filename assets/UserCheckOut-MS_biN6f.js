import{k as $,s as j,e as k,r as E,C as V,m as I,c as b,b as s,a as e,u as i,j as v,F as P,p as N,t as u,w as C,J as w,i as F,h as B,o as p,d as n,n as c,g as D,v as R,R as L,S as O}from"./index-BrREbNrm.js";import{_ as H}from"./VueLoading-l-VKllCj.js";import{_ as Q}from"./FooterComponent-CrwWYiNG.js";import{r as _}from"./ChevronRightIcon-Cpr8qF6r.js";import{r as Y}from"./ChevronLeftIcon-C9thpGrV.js";import"./UserCircleIcon-BhcjD08z.js";const z={VITE_APP_API:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"funniecafeweb-api"},J={class:"mb-5"},G={class:"container mx-auto px-6 py-6"},K={class:"flex justify-center items-center my-5 mt-3 space-x-2 md:space-x-4"},W={class:"my-12"},X={class:"grid grid-cols-1 lg:grid-cols-12 gap-x-6 bg-white dark:bg-gray-900"},Z={class:"lg:col-span-7"},ee={class:"space-y-2 mb-6 lg:mb-0"},te={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between"},se={class:"w-full md:w-1/2 font-bold text-espresso hidden lg:block sm:whitespace-nowrap dark:text-gray-200"},le={class:"ml-2 inline-block bg-yellow-200 text-yellow-900 text-xs font-medium px-2 py-0.5 rounded-full select-none"},re={class:"w-full md:w-1/4 text-left md:text-center hidden lg:block dark:text-gray-200"},oe={class:"flex justify-between w-full lg:w-3/4 lg:hidden sm:whitespace-nowrap"},ae={class:"w-1/2 font-bold text-espresso dark:text-gray-200"},de={class:"ml-2 inline-block bg-yellow-200 text-yellow-900 text-xs font-medium px-2 py-0.5 rounded-full select-none"},ne={class:"w-1/2 text-right dark:text-gray-200"},ie={class:"w-full lg:w-1/4 text-right mt-2 lg:mt-0"},me={key:0,class:"text-green-600 dark:text-green-400"},ue={class:"font-bold text-primary dark:text-gray-200"},ce={class:"flex justify-between px-4 pt-4 dark:text-gray-200"},xe={class:"text-right w-1/4 font-bold text-xl"},fe={key:0,class:"flex justify-between px-4 text-green-600 dark:text-green-400 font-semibold"},be={class:"text-right w-1/4 font-bold text-xl"},pe={class:"lg:col-span-5 mt-6 lg:mt-0"},ge={class:"mb-3"},ye={class:"mb-3"},he={class:"mb-3"},ke={class:"mb-3"},ve={class:"mb-3"},we={class:"w-full flex flex-col"},_e={class:"normal-input"},Ve={class:"flex"},Pe={class:"flex items-center mr-4"},Ce={class:"flex items-center"},qe={key:0,class:"mb-3"},Te={class:"flex flex-wrap"},Ae={class:"w-full"},Me={class:"my-4 w-full md:w-1/2"},Se={class:"mb-4 w-full md:w-1/2"},Ue={class:"mb-3 mt-6"},$e={class:"flex justify-between items-center"},je={type:"submit",class:"btn-secondary rounded flex items-center font-bold px-4 py-2"},Le={__name:"UserCheckOut",setup(Ee){const{VITE_APP_API:q,VITE_APP_PATH:T}=z,A=F("$axios"),M=B(),y=$(),{cart:x}=j(y),h=k(!1),g=k(""),f=k(""),o=E({user:{name:"",email:"",tel:"",address:"",pay:""},message:""});V(f,(a,t)=>{a.length<t.length&&a.charAt(a.length-1)===" "&&(f.value=t.slice(0,-2)),a.length>t.length&&(a.length+1)%5===0&&f.value.length!==0&&f.value.length<19&&(f.value=a+" ")}),V(g,(a,t)=>{a.length===2&&a.length>t.length?g.value+="/":a.length<t.length&&t.charAt(2)==="/"&&t.length===3&&(g.value=t.slice(0,1))});function S(){const a=`${q}api/${T}/order`,t=o;h.value=!0,A.post(a,{data:t}).then(d=>{M.push(`/checkorder/${d.data.orderId}`),y.getCart()}).catch(d=>{const m=d.response?.data?.message||"An error occurred. Please try again later.";O("error",m)}).finally(()=>{h.value=!1})}return I(()=>{y.getCart()}),(a,t)=>{const d=w("FieldVue"),m=w("ErrorMessage"),U=w("FormVue");return p(),b(P,null,[s(H,{active:h.value},null,8,["active"]),e("section",J,[e("div",G,[t[31]||(t[31]=e("div",{class:"banner banner2 h-[35vh] min-h-40 max-h-150 md:h-[50vh] md:min-h-50 flex justify-center items-center my-10 relative"},[e("h2",{class:"banner-title text-white font-extrabold text-3xl text-center absolute"}," Checkout Process ")],-1)),e("div",K,[t[9]||(t[9]=e("div",{class:"flex flex-col items-center pay-header active"},[e("span",{class:"mb-1"},"STEP 1"),e("span",null,"Information")],-1)),s(i(_),{class:"w-5 h-5 text-secondary dark:text-primary"}),t[10]||(t[10]=e("div",{class:"flex flex-col items-center pay-header"},[e("span",{class:"mb-1"},"STEP 2"),e("span",null,"Payment")],-1)),s(i(_),{class:"w-5 h-5 text-secondary dark:text-primary"}),t[11]||(t[11]=e("div",{class:"flex flex-col items-center pay-header"},[e("span",{class:"mb-1"},"STEP 3"),e("span",null,"Complete")],-1))]),e("div",W,[e("div",X,[e("div",Z,[t[16]||(t[16]=e("h3",{class:"text-center font-bold text-black mb-6 md:mb-8 lg:mb-10 text-xl md:text-2xl dark:text-white"}," Order Details ",-1)),e("div",ee,[t[15]||(t[15]=e("div",{class:"hidden lg:flex text-center bg-[#f5efe7] dark:bg-gray-600 dark:text-gray-100 text-gray-800 font-semibold px-4 py-2"},[e("div",{class:"w-1/2 text-left"},"Product"),e("div",{class:"w-1/4 text-center"},"Qty"),e("div",{class:"w-1/4 text-right"},"Price")],-1)),(p(!0),b(P,null,N(i(x).carts,l=>(p(),b("div",{key:l.id,class:"px-4 py-3 shadow lg:shadow-none dark:border-2 dark:border-gray-500 dark:rounded dark:lg:border-none dark:lg:rounded-none"},[e("div",te,[e("div",se,[n(u(l.product.title),1),e("span",le,"( "+u(l.product.category)+" )",1)]),e("div",re,u(l.qty),1),e("div",oe,[e("div",ae,[n(u(l.product.title),1),e("span",de,"( "+u(l.product.category)+" )",1)]),e("div",ne,[t[12]||(t[12]=e("span",{class:"pr-1"},"Qty : ",-1)),n(u(l.qty),1)])]),e("div",ie,[i(x).final_total!==i(x).total?(p(),b("small",me,"Special：")):v("",!0),e("span",ue,u(a.$format.currency(l.final_total)),1)])])]))),128)),e("div",ce,[t[13]||(t[13]=e("div",{class:"text-right w-3/4 text-lg"},"Total",-1)),e("div",xe,u(a.$format.currency(i(x).total)),1)]),i(x).final_total!==i(x).total?(p(),b("div",fe,[t[14]||(t[14]=e("div",{class:"text-right w-3/4 text-lg"},"Special：",-1)),e("div",be,u(a.$format.currency(i(x).final_total)),1)])):v("",!0)])]),e("div",pe,[t[30]||(t[30]=e("h3",{class:"text-center font-bold text-black mb-6 md:mb-8 lg:mb-10 text-xl md:text-2xl dark:text-white"}," Customer Details ",-1)),s(U,{onSubmit:S},{default:C(({errors:l})=>[e("div",ge,[t[17]||(t[17]=e("label",{for:"name",class:"block font-medium text-gray-700 dark:text-gray-200 mb-1"},[n("Name"),e("small",{class:"ps-1 text-red-600 dark:text-red-400 font-bold"},"*")],-1)),s(d,{id:"name",name:"name",type:"text",class:c(["form-control rounded text-sm md:text-base",["block w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",l.name?"border-red-500 focus:ring-red-500":"border-gray-300"]]),placeholder:"Please enter your name",rules:"required",modelValue:o.user.name,"onUpdate:modelValue":t[0]||(t[0]=r=>o.user.name=r)},null,8,["class","modelValue"]),s(m,{name:"name",class:"text-sm text-red-600 dark:text-red-400 mt-1"})]),e("div",ye,[t[18]||(t[18]=e("label",{for:"email",class:"block font-medium text-gray-700 dark:text-gray-200 mb-1"},[n("Email"),e("small",{class:"pl-1 text-red-600 font-bold"},"*")],-1)),s(d,{id:"email",name:"email",type:"email",class:c(["form-control rounded text-sm md:text-base",["block w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",l.email?"border-red-500 focus:ring-red-500":"border-gray-300"]]),placeholder:"Please enter your email",rules:"email|required",modelValue:o.user.email,"onUpdate:modelValue":t[1]||(t[1]=r=>o.user.email=r)},null,8,["class","modelValue"]),s(m,{name:"email",class:"text-sm text-red-600 dark:text-red-400 mt-1"})]),e("div",he,[t[19]||(t[19]=e("label",{for:"tel",class:"block font-medium text-gray-700 dark:text-gray-200 mb-1"},[n("Phone"),e("small",{class:"pl-1 text-red-600 dark:text-red-400 font-bold"},"*")],-1)),s(d,{id:"tel",name:"phone number",type:"tel",class:c(["form-control rounded text-sm md:text-base",["block w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",l["phone number"]?"border-red-500 focus:ring-red-500":"border-gray-300"]]),placeholder:"Please enter your phone number",rules:"required|numeric|min:7|max:11",modelValue:o.user.tel,"onUpdate:modelValue":t[2]||(t[2]=r=>o.user.tel=r)},null,8,["class","modelValue"]),s(m,{name:"phone number",class:"text-sm text-red-600 dark:text-red-400 mt-1"})]),e("div",ke,[t[20]||(t[20]=e("label",{for:"address",class:"block font-medium text-gray-700 dark:text-gray-200 mb-1"},[n("Delivery Address"),e("small",{class:"pl-1 text-red-600 dark:text-red-400 font-bold"},"*")],-1)),s(d,{id:"address",name:"address",type:"text",class:c(["form-control rounded text-sm md:text-base",["block w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",l.address?"border-red-500 focus:ring-red-500":"border-gray-300"]]),placeholder:"Please enter your address",rules:"required",modelValue:o.user.address,"onUpdate:modelValue":t[3]||(t[3]=r=>o.user.address=r)},null,8,["class","modelValue"]),s(m,{name:"address",class:"text-sm text-red-600 dark:text-red-400 mt-1"})]),e("div",ve,[e("fieldset",we,[t[23]||(t[23]=e("legend",{class:"block font-medium text-gray-700 dark:text-gray-200 mb-1 w-auto"},[n(" Payment Method"),e("small",{class:"pl-1 text-red-600 dark:text-red-400 font-bold"},"*")],-1)),e("div",_e,[e("div",Ve,[e("div",Pe,[s(d,{type:"radio",name:"Payment Method",rules:"required",id:"creditCard",value:"creditCard",modelValue:o.user.pay,"onUpdate:modelValue":t[4]||(t[4]=r=>o.user.pay=r),class:c([{error:l["Payment Method"]},"h-4 w-4 text-primary focus:ring-espresso border-gray-300 cursor-pointer"])},null,8,["modelValue","class"]),t[21]||(t[21]=e("label",{class:"ml-2 text-gray-700 dark:text-gray-200",for:"creditCard"},"Credit Card",-1))]),e("div",Ce,[s(d,{type:"radio",name:"Payment Method",rules:"required",id:"cash",value:"cash",modelValue:o.user.pay,"onUpdate:modelValue":t[5]||(t[5]=r=>o.user.pay=r),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 cursor-pointer"},null,8,["modelValue"]),t[22]||(t[22]=e("label",{class:"ml-2 text-gray-700 dark:text-gray-200",for:"cash"},"Cash",-1))])]),s(m,{name:"Payment Method",class:"error-text absolute text-sm text-red-600 dark:text-red-400"})])])]),o.user.pay==="creditCard"?(p(),b("div",qe,[t[26]||(t[26]=e("label",{for:"cardNum",class:"form-label dark:text-gray-200"},[n("Card Number"),e("small",{class:"pl-1 text-red-600 dark:text-red-400 font-bold"},"*")],-1)),e("div",Te,[e("div",Ae,[s(d,{id:"cardNum",name:"Credit Card Number",type:"tel",class:c(["form-control rounded text-sm md:text-base",["block w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",l["Credit Card Number"]?"border-red-500 focus:ring-red-500":"border-gray-300"]]),maxlength:"19",placeholder:"**** **** **** ****",rules:"required",modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=r=>f.value=r)},null,8,["class","modelValue"]),s(m,{name:"Credit Card Number",class:"text-sm text-red-600 dark:text-red-400 mt-1"}),e("div",Me,[t[24]||(t[24]=e("label",{for:"period",class:"form-label required dark:text-gray-200"},[n("Expiration Date"),e("small",{class:"pl-1 text-red-600 dark:text-red-400 font-bold"},"*")],-1)),s(d,{id:"period",name:"Expiration Date",type:"tel",class:c(["form-control rounded text-sm md:text-base",["block w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",l["Expiration Date"]?"border-red-500 focus:ring-red-500":"border-gray-300"]]),placeholder:"MM/YY",maxlength:"5",modelValue:g.value,"onUpdate:modelValue":t[7]||(t[7]=r=>g.value=r),rules:"required"},null,8,["modelValue","class"]),s(m,{name:"Expiration Date",class:"text-sm text-red-600 dark:text-red-400 mt-1"})]),e("div",Se,[t[25]||(t[25]=e("label",{for:"checkCode",class:"form-label required dark:text-gray-200"},[n("CVV"),e("small",{class:"pl-1 text-red-600 dark:text-red-400 font-bold"},"*")],-1)),s(d,{id:"checkCode",name:"CVV",type:"text",class:c(["form-control rounded text-sm md:text-base",["block w-full px-3 py-2 border rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",l.CVV?"border-red-500 focus:ring-red-500":"border-gray-300"]]),maxlength:"3",placeholder:"CVV",rules:"required|length:3|numeric:true"},null,8,["class"]),s(m,{name:"CVV",class:"text-sm text-red-600 dark:text-red-400 mt-1"})])])])])):v("",!0),e("div",Ue,[t[27]||(t[27]=e("label",{for:"message",class:"block font-medium text-gray-700 mb-1 dark:text-gray-200"},"Comment",-1)),D(e("textarea",{name:"",id:"message",class:"form-control rounded",cols:"30",rows:"10","onUpdate:modelValue":t[8]||(t[8]=r=>o.message=r)},null,512),[[R,o.message]])]),e("div",$e,[s(i(L),{class:"btn-outline-primary rounded flex items-center font-bold px-4 py-2",to:"/cart"},{default:C(()=>[s(i(Y),{class:"w-5 h-5 mr-1"}),t[28]||(t[28]=n("Back",-1))]),_:1}),e("button",je,[t[29]||(t[29]=n(" Next",-1)),s(i(_),{class:"w-5 h-5 ml-1"})])])]),_:1})])])])])]),s(Q)],64)}}};export{Le as default};
